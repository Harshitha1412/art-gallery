{"ast":null,"code":"const handleLogin = async e => {\n  e.preventDefault();\n  if (!role) {\n    setErrorMessage('Please select a role.');\n    return;\n  }\n  const loginData = {\n    username,\n    password,\n    role\n  };\n  let loginUrl = '';\n\n  // Determine the login URL based on the selected role\n  switch (role) {\n    case 'ADMIN':\n      loginUrl = 'http://localhost:8080/api/admin/login';\n      break;\n    case 'ARTIST':\n      loginUrl = 'http://localhost:8080/api/artists/login';\n      break;\n    case 'CURATOR':\n      loginUrl = 'http://localhost:8080/api/curators/login';\n      break;\n    case 'VISITOR':\n      loginUrl = 'http://localhost:8080/api/visitors/login';\n      break;\n    default:\n      setErrorMessage('Invalid role');\n      return;\n  }\n  try {\n    const response = await axios.post(loginUrl, loginData);\n    console.log(response.data); // Log response for debugging\n\n    const {\n      role: responseRole,\n      userId\n    } = response.data;\n    if (userId) {\n      // Store userId and role in localStorage for all roles\n      localStorage.setItem('authToken', 'valid-auth-token'); // Mock token for authentication\n      localStorage.setItem('userId', userId);\n      localStorage.setItem('role', responseRole);\n\n      // Redirect user based on role\n      switch (responseRole) {\n        case 'ADMIN':\n          window.location.href = `/admin/${userId}`;\n          break;\n        case 'ARTIST':\n          window.location.href = `/artist/${userId}`;\n          break;\n        case 'VISITOR':\n          window.location.href = `/${userId}`;\n          break;\n        case 'CURATOR':\n          window.location.href = `/curator/${userId}`;\n          break;\n        default:\n          window.location.href = '/login';\n          break;\n      }\n    } else {\n      setErrorMessage('Invalid response, userId is missing');\n    }\n  } catch (error) {\n    var _error$response, _error$response$data;\n    setErrorMessage(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Login failed. Please try again.');\n  }\n};","map":{"version":3,"names":["handleLogin","e","preventDefault","role","setErrorMessage","loginData","username","password","loginUrl","response","axios","post","console","log","data","responseRole","userId","localStorage","setItem","window","location","href","error","_error$response","_error$response$data","message"],"sources":["F:/Java/ArtGallery-React/frontend/src/components/Login.js"],"sourcesContent":["const handleLogin = async (e) => {\r\n  e.preventDefault();\r\n\r\n  if (!role) {\r\n    setErrorMessage('Please select a role.');\r\n    return;\r\n  }\r\n\r\n  const loginData = { username, password, role };\r\n  let loginUrl = '';\r\n\r\n  // Determine the login URL based on the selected role\r\n  switch (role) {\r\n    case 'ADMIN':\r\n      loginUrl = 'http://localhost:8080/api/admin/login';\r\n      break;\r\n    case 'ARTIST':\r\n      loginUrl = 'http://localhost:8080/api/artists/login';\r\n      break;\r\n    case 'CURATOR':\r\n      loginUrl = 'http://localhost:8080/api/curators/login';\r\n      break;\r\n    case 'VISITOR':\r\n      loginUrl = 'http://localhost:8080/api/visitors/login';\r\n      break;\r\n    default:\r\n      setErrorMessage('Invalid role');\r\n      return;\r\n  }\r\n\r\n  try {\r\n    const response = await axios.post(loginUrl, loginData);\r\n    console.log(response.data);  // Log response for debugging\r\n\r\n    const { role: responseRole, userId } = response.data;\r\n\r\n    if (userId) {\r\n      // Store userId and role in localStorage for all roles\r\n      localStorage.setItem('authToken', 'valid-auth-token'); // Mock token for authentication\r\n      localStorage.setItem('userId', userId);\r\n      localStorage.setItem('role', responseRole);\r\n\r\n      // Redirect user based on role\r\n      switch (responseRole) {\r\n        case 'ADMIN':\r\n          window.location.href = `/admin/${userId}`;\r\n          break;\r\n        case 'ARTIST':\r\n          window.location.href = `/artist/${userId}`;\r\n          break;\r\n        case 'VISITOR':\r\n          window.location.href = `/${userId}`;\r\n          break;\r\n        case 'CURATOR':\r\n          window.location.href = `/curator/${userId}`;\r\n          break;\r\n        default:\r\n          window.location.href = '/login';\r\n          break;\r\n      }\r\n    } else {\r\n      setErrorMessage('Invalid response, userId is missing');\r\n    }\r\n  } catch (error) {\r\n    setErrorMessage(error.response?.data?.message || 'Login failed. Please try again.');\r\n  }\r\n};\r\n"],"mappings":"AAAA,MAAMA,WAAW,GAAG,MAAOC,CAAC,IAAK;EAC/BA,CAAC,CAACC,cAAc,CAAC,CAAC;EAElB,IAAI,CAACC,IAAI,EAAE;IACTC,eAAe,CAAC,uBAAuB,CAAC;IACxC;EACF;EAEA,MAAMC,SAAS,GAAG;IAAEC,QAAQ;IAAEC,QAAQ;IAAEJ;EAAK,CAAC;EAC9C,IAAIK,QAAQ,GAAG,EAAE;;EAEjB;EACA,QAAQL,IAAI;IACV,KAAK,OAAO;MACVK,QAAQ,GAAG,uCAAuC;MAClD;IACF,KAAK,QAAQ;MACXA,QAAQ,GAAG,yCAAyC;MACpD;IACF,KAAK,SAAS;MACZA,QAAQ,GAAG,0CAA0C;MACrD;IACF,KAAK,SAAS;MACZA,QAAQ,GAAG,0CAA0C;MACrD;IACF;MACEJ,eAAe,CAAC,cAAc,CAAC;MAC/B;EACJ;EAEA,IAAI;IACF,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAACC,IAAI,CAACH,QAAQ,EAAEH,SAAS,CAAC;IACtDO,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAAE;;IAE7B,MAAM;MAAEX,IAAI,EAAEY,YAAY;MAAEC;IAAO,CAAC,GAAGP,QAAQ,CAACK,IAAI;IAEpD,IAAIE,MAAM,EAAE;MACV;MACAC,YAAY,CAACC,OAAO,CAAC,WAAW,EAAE,kBAAkB,CAAC,CAAC,CAAC;MACvDD,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEF,MAAM,CAAC;MACtCC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEH,YAAY,CAAC;;MAE1C;MACA,QAAQA,YAAY;QAClB,KAAK,OAAO;UACVI,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,UAAUL,MAAM,EAAE;UACzC;QACF,KAAK,QAAQ;UACXG,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,WAAWL,MAAM,EAAE;UAC1C;QACF,KAAK,SAAS;UACZG,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,IAAIL,MAAM,EAAE;UACnC;QACF,KAAK,SAAS;UACZG,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,YAAYL,MAAM,EAAE;UAC3C;QACF;UACEG,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;UAC/B;MACJ;IACF,CAAC,MAAM;MACLjB,eAAe,CAAC,qCAAqC,CAAC;IACxD;EACF,CAAC,CAAC,OAAOkB,KAAK,EAAE;IAAA,IAAAC,eAAA,EAAAC,oBAAA;IACdpB,eAAe,CAAC,EAAAmB,eAAA,GAAAD,KAAK,CAACb,QAAQ,cAAAc,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBT,IAAI,cAAAU,oBAAA,uBAApBA,oBAAA,CAAsBC,OAAO,KAAI,iCAAiC,CAAC;EACrF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}